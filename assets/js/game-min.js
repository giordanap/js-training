(()=>{"use strict";let d=[],e=[],f=["C","D","H","S"],g=["A","J","Q","K"],a=document.querySelector("#btnNew"),b=document.querySelector("#btnDraw"),c=document.querySelector("#btnStop"),h=document.querySelectorAll(".divCards"),i=document.querySelectorAll("small"),j=(f=2)=>{d=k(),e=[];for(let a=0;a<f;a++)e.push(0);i.forEach(a=>a.innerText=0),h.forEach(a=>a.innerText=""),b.disabled=!1,c.disabled=!1},k=()=>{for(let b of(d=[],f)){for(let a=2;a<=10;a++)d.push(a+b);for(let c of g)d.push(c+b)}return _.shuffle(d)},l=()=>{if(0===d.length)throw"There is not cards";return d.pop()},m=b=>{let a=b.substring(0,b.length-1);return isNaN(a)?"J"===a?11:"Q"===a?12:"K"===a?13:"A"===a?11:10:1*a},n=(b,a)=>(e[a]+=m(b),i[a].innerText=e[a],e[a]),o=(b,c)=>{let a=document.createElement("img");a.src=`assets/cartas/${b}.png`,a.classList.add("card"),h[c].append(a)},p=()=>{let[a,b]=e;setTimeout(()=>{b===a?alert("Tie!"):a>21?alert("Sorry, you lost!"):b>21?alert("Great, you won!"):alert("Sorry, you lost!")},1e3)},q=a=>{let b=0;do{let c=l();b=n(c,e.length-1),o(c,e.length-1)}while(b<a&&a<=21)p()};a.addEventListener("click",()=>{j()}),b.addEventListener("click",()=>{let d=l(),a=n(d,0);o(d,0),a>21?(b.disabled=!0,c.disabled=!0,q(a)):21===a&&(b.disabled=!0,c.disabled=!0,q(a))}),c.addEventListener("click",()=>{b.disabled=!0,c.disabled=!0,q(e[0])})})()